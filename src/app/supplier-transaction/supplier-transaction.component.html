<div class="container">
  <h2>Supplier Transaction</h2>

  <!-- Common Fields -->
  <div class="form-section">
    <h3>Transaction Details</h3>
    <div class="form-row">
      <div class="form-group">
        <label>Vendor *</label>
        <select [(ngModel)]="vendorId" class="form-control">
          <option value="0">Select Vendor</option>
          <option *ngFor="let vendor of vendors" [value]="vendor.id">
            {{ vendor.name }}
          </option>
        </select>
      </div>

      <div class="form-group">
        <label>Vehicle Type *</label>
        <input
          [(ngModel)]="vehicleType"
          placeholder="Enter Vehicle Type"
          class="form-control"
          required>
      </div>

      <div class="form-group">
        <label>Vehicle Number *</label>
        <input
          [(ngModel)]="vehicleNumber"
          placeholder="Enter Vehicle Number"
          class="form-control">
      </div>
    </div>
  </div>

  <!-- Items Table -->
  <div class="form-section">
    <h3>Items</h3>
    <div class="table-container">
      <table>
        <thead>
        <tr>
          <th>Paint Name *</th>
          <th>Container Size (L)</th>
          <th>Quantity *</th>
          <th>Price per Unit (₹) *</th>
          <th>Total (₹)</th>
          <th>Action</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let item of items; let i = index">
          <td>
            <select
              [(ngModel)]="item.paintId"
              (ngModelChange)="onPaintChange(item)"
              name="paint{{i}}"
              class="form-control">
              <option [ngValue]="0">Select Paint</option>
              <option *ngFor="let paint of paints"
                      [ngValue]="paint.id">
                {{ paint.paintName }}
              </option>
            </select>
          </td>
          <td>
            <input
              type="number"
              [(ngModel)]="item.containerSize"
              min="1"
              class="form-control">
          </td>
          <td>
            <input
              type="number"
              [(ngModel)]="item.quantity"
              min="1"
              class="form-control">
          </td>
          <td>
            <input
              type="number"
              [(ngModel)]="item.pricePerUnit"
              min="0"
              step="0.01"
              class="form-control">
          </td>
          <td class="total-col">
            ₹ {{ rowTotal(item) | number:'1.2-2' }}
          </td>
          <td>
            <button
              (click)="removeRow(i)"
              [disabled]="items.length === 1"
              class="btn-remove"
              title="Remove Row">
              ❌
            </button>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
    <button (click)="addRow()" class="btn-add"> Add Paint Item</button>
  </div>

  <!-- Total and Submit -->
  <div class="total-section">
    <h3>Total Amount: ₹ {{ grandTotal() | number:'1.2-2' }}</h3>
    <div class="button-group">
      <button (click)="submit()" [disabled]="!canSubmit()" class="btn-submit">
        Submit Transaction
      </button>
    </div>
  </div>
</div>
